webpackJsonp([1],{"1xET":function(e,t){},"2om2":function(e,t){},"6MZh":function(e,t){},C6UZ:function(e,t){},CpyD:function(e,t){},Im2i:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("tvR6"),a("Qbok");var r=a("7+uW"),i=a("/ocq"),s=a("mvHQ"),n=a.n(s),o={set:function(e,t){sessionStorage.setItem(e,n()(t))},get:function(e){return JSON.parse(sessionStorage.getItem(e))},remove:function(e){sessionStorage.clear()},setKey:function(e){var t=this.get("LoginInfo");t.key=e,this.set("LoginInfo",t)}},l={name:"login",data:function(){return{username:"",password:"",userType:1,loading:!1}},mounted:function(){window.addEventListener("popstate",function(){window.history.pushState("forward",null,"#"),window.history.forward(1)}),window.history.pushState("forward",null,"#"),window.history.forward(1)},methods:{toggleType:function(e){this.userType=e},login:function(){var e=this;""!=this.username&&""!=this.password?(this.loading=!0,this.$http.post("",{Account:this.username,Pwd:this.password,UserType:this.userType,opr:"Login"}).then(function(t){e.loading=!1,"false"!==t.data.result.toLowerCase()?(o.set("LoginInfo",t.data),1==e.userType?e.$router.push("/user"):e.$router.push("/admin/dirAdmin")):e.$message.error(t.data.errmsg)}).catch(function(t){e.$message.error("数据错误"),e.loading=!1})):this.$message({message:"用户名和密码必填",type:"warning"})}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"bg",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"login"},[a("div",{staticClass:"inp"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"请输入用户名",autocomplete:"off"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:e.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)},input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"loginBtn"},[a("button",{on:{click:e.login}},[e._v("登 录")])]),e._v(" "),e._m(0),e._v(" "),a("div",{staticClass:"tapBtn",attrs:{id:"tapBtn"}},[a("button",{class:{now:1==e.userType},on:{click:function(t){return e.toggleType(1)}}},[e._v("用户登录")]),e._v(" "),a("button",{class:{now:0==e.userType},on:{click:function(t){return e.toggleType(0)}}},[e._v("管理员登录")])])]),e._v(" "),a("div",{staticClass:"footer"},[e._v("\n      杭州海康威视数字技术股份有限公司 版权所有 Powered by Mountor\n  ")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logoImg"},[t("img",{attrs:{src:a("dLd/"),alt:""}})])}]};var u=a("VU/8")(l,c,!1,function(e){a("Im2i")},"data-v-45ff6fe5",null).exports,d={data:function(){return{active:"",user:"",userType:""}},beforeCreate:function(){},mounted:function(){var e=o.get("LoginInfo");null==e&&this.$router.push("/login"),this.userType=e.UserType,1==e.UserType&&-1!=this.$route.path.indexOf("admin")&&(o.remove(),this.$router.push("/login")),0==e.UserType&&-1!=this.$route.path.indexOf("user")&&(o.remove(),this.$router.push("/login")),this.user=e.username,this.active=this.$route.path},methods:{dropOut:function(){o.remove("LoginInfo"),this.$router.push("/login")}}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"header"},[e._m(0),e._v(" "),1==e.userType?a("ul",{staticClass:"fl"},[a("li",[a("router-link",{attrs:{to:"/user"}},[e._v("文件夹管理")]),e._v(" "),"/user"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1)]):e._e(),e._v(" "),0==e.userType?a("ul",{staticClass:"fl"},[a("li",[a("router-link",{attrs:{to:"/admin/dirAdmin"}},[e._v("文件夹管理")]),e._v(" "),"/admin/dirAdmin"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1),e._v(" "),a("li",[a("router-link",{attrs:{to:"/admin/fileServer"}},[e._v("文件服务器管理")]),e._v(" "),"/admin/fileServer"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1),e._v(" "),a("li",[a("router-link",{attrs:{to:"/admin/report"}},[e._v("报表")]),e._v(" "),"/admin/report/RenewalOfApproval"==e.active||"/admin/report/FolderReport"==e.active||"/admin/report"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1),e._v(" "),a("li",[a("router-link",{attrs:{to:"/admin/authorization"}},[e._v("授权设置")]),e._v(" "),"/admin/authorization"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1),e._v(" "),a("li",[a("router-link",{attrs:{to:"/admin/commitLog"}},[e._v("操作日志")]),e._v(" "),"/admin/commitLog"==e.active?a("i",{staticClass:"el-icon-caret-top"}):e._e()],1)]):e._e(),e._v(" "),a("div",{staticClass:"user fr"},[a("div",{staticClass:"username fn-right"},[e._v("\n        用户名："),a("a",{attrs:{href:"javascript:void(0);"}},[e._v(e._s(e.user))]),e._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),e._v(" "),a("div",{staticClass:"quit"},[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.dropOut}},[e._v("退出")])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fl"},[t("img",{attrs:{src:a("dLd/"),alt:""}})])}]};var p=a("VU/8")(d,v,!1,function(e){a("ONge"),a("ekt/")},"data-v-520b3ef5",null).exports,h={data:function(){return{}},components:{VHeader:p}},g={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("router-view",{staticStyle:{height:"100%"}})],1)},staticRenderFns:[]};var m=a("VU/8")(h,g,!1,function(e){a("QS3G")},"data-v-0799df71",null).exports,f=a("lHA8"),_=a.n(f),y=a("Gu7T"),w=a.n(y),x={name:"newDir",props:["optionsSize"],watch:{dirName:function(e){""==e?this.isSaveBtn=!0:this.codeValue?this.isSaveBtn=!1:this.isSaveBtn=!0,this.showError=!1,this.showSuccess=!1},codeValue:function(e){this.isSaveBtn=!1}},computed:{getNewDayValue:function(){(a=new Date).setDate(a.getDate()+this.dayValue);var e=a.getFullYear(),t=a.getMonth()+1,a=a.getDate();return e+"-"+(t=t<10?"0"+t:t)+"-"+(a=a<10?"0"+a:t)}},data:function(){return{loading:!1,activeName:"first",codeValue:"",authOptions:[],fileServerName:"",sizeValue:"",dayValue:90,optionsDay:[{value:90,label:"90天"},{value:180,label:"180天"},{value:365,label:"365天"}],textarea:"",showProp:!1,checkedArr:[],dirName:"",showError:!1,showSuccess:!1,isSaveBtn:!0,Desc:"",editType:"",editList:[],readOnlyList:[],searchInp:"",cacheArr:[]}},methods:{handleClick:function(e,t){},cancel:function(){this.$parent.showNewDir=!1},removeEditUser:function(e){this.editList.splice(e,1)},removeReadUser:function(e){this.readOnlyList.splice(e,1)},PropDiv:function(e,t){this.cacheArr=[];var a=this.$refs.prop;a.style.top=e.clientY+"px",a.style.left=e.clientX+"px",this.editType=1==t?1:0,this.showProp=!0,this.searchInp="",this.checkedArr=[]},cancelProp:function(){this.showProp=!1},pushSettingList:function(){var e;1==this.editType&&(e=this.merge(this.editList.concat(this.cacheArr),this.readOnlyList),this.editList=e[0],this.readOnlyList=e[1]),0==this.editType&&(e=this.merge(this.readOnlyList.concat(this.cacheArr),this.editList),this.editList=e[1],this.readOnlyList=e[0]),this.showProp=!1},merge:function(e,t){for(var a=[],r=[],i=[],s=[],o=0;o<e.length;o++)a.push(n()(e[o]));for(var l=0;l<t.length;l++)r.push(n()(t[l]));a=[].concat(w()(new _.a(a)));for(var c=0;c<a.length;c++){for(var u=0;u<r.length;u++)a[c]==r[u]&&r.splice(u,1);s.push(JSON.parse(a[c]))}for(var d=0;d<r.length;d++)i.push(JSON.parse(r[d]));return[s,i]},initCheckedArr:function(e,t){if(0!=t.length)if(1==e){if(0==this.readOnlyList.length)return;for(var a=[],r=[],i=[],s=0;s<this.readOnlyList.length;s++)a.push(n()(this.readOnlyList[s]));for(var o=0;o<t.length;o++)r.push(n()(this.checkedArr[o]));for(var l=0;l<a.length;l++)for(var c=0;c<r.length;c++)if(a[l]==r[c]){r.splice(c,1);break}for(var u=0;u<r.length;u++)i.push(JSON.parse(r[u]));this.checkedArr=i}else{if(0==this.editList.length)return;for(var d=[],v=[],p=[],h=0;h<this.editList.length;h++)d.push(n()(this.editList[h]));for(var g=0;g<t.length;g++)v.push(n()(this.checkedArr[g]));for(var m=0;m<d.length;m++)for(var f=0;f<v.length;f++)if(d[m]==v[f]){v.splice(f,1);break}for(var _=0;_<v.length;_++)p.push(JSON.parse(v[_]));this.checkedArr=p}},linkage:function(e){this.fileServerName=e.Name,this.sizeValue=e.FileSpace},inspectName:function(){var e=this;""!=this.dirName?this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderName:this.dirName,LoginUser:o.get("LoginInfo").Account,opr:"CheckFolderName"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);"true"==a.result.toLowerCase()?(e.showSuccess=!0,e.showError=!1):(e.showSuccess=!1,e.showError=!0)}).catch(function(t){e.$message.error("数据错误")}):this.$message.warning("请输入文件夹名称")},getUserListByKeyWord:function(){var e=this;""!=this.searchInp&&(this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.searchInp,Account:o.get("LoginInfo").Account,LoginUser:o.get("LoginInfo").Account,opr:"SearchUserForPermissions"}).then(function(t){var a=t.data;if(e.loading=!1,o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.checkedArr=a.data}).catch(function(t){e.$message.error("数据错误")}))},saveDir:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderName:this.dirName,AccreditID:this.codeValue.AccreditID,Space:this.sizeValue,Validity:this.dayValue,Desc:this.Desc,Permissions:n()({Editor:this.editList,Reader:this.readOnlyList}),Account:o.get("LoginInfo").Account,LoginUser:o.get("LoginInfo").Account,opr:"AddFolder"}).then(function(t){var a=t.data;if(e.loading=!1,"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.$emit("successFn","success")}).catch(function(t){e.$message.error("数据错误")})}},mounted:function(){var e=this;this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,Account:o.get("LoginInfo").Account,LoginUser:o.get("LoginInfo").Account,opr:"GetAccreditIDList"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.authOptions=a.data}).catch(function(t){e.$message.error("数据错误")}),this.editList=[{Name:o.get("LoginInfo").username,Account:o.get("LoginInfo").Account}]}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bgModel"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.cancel}}),e._v("\n      文件夹属性\n    ")]),e._v(" "),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础设置",name:"first"}},[a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件夹名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.dirName,expression:"dirName",modifiers:{lazy:!0}}],attrs:{type:"text"},domProps:{value:e.dirName},on:{change:function(t){e.dirName=t.target.value}}})])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:7,span:17}},[a("a",{staticStyle:{color:"#409EFF"},attrs:{href:"javascript:void (0)"},on:{click:e.inspectName}},[e._v("检查文件名称是否可用 "),e.showError?a("i",{staticClass:"el-icon-error",staticStyle:{color:"#F56C6C"}}):e._e(),e._v(" "),e.showSuccess?a("i",{staticClass:"el-icon-success",staticStyle:{color:"#67C23A"}}):e._e()])])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("授权编号")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},on:{change:function(t){return e.linkage(e.codeValue)}},model:{value:e.codeValue,callback:function(t){e.codeValue=t},expression:"codeValue"}},e._l(e.authOptions,function(e){return a("el-option",{key:e.AccreditID,attrs:{label:e.AccreditID,value:e}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("选择文件服务器")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fileServerName,expression:"fileServerName"}],attrs:{type:"text",readonly:""},domProps:{value:e.fileServerName},on:{input:function(t){t.target.composing||(e.fileServerName=t.target.value)}}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("设置文件大小")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},model:{value:e.sizeValue,callback:function(t){e.sizeValue=t},expression:"sizeValue"}},e._l(e.optionsSize,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("有效期")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"请选择"},model:{value:e.dayValue,callback:function(t){e.dayValue=t},expression:"dayValue"}},e._l(e.optionsDay,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("span",{staticClass:"warning"},[e._v("到期时间为"),a("span",{domProps:{textContent:e._s(e.getNewDayValue)}})])],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("说明")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.Desc,expression:"Desc"}],attrs:{cols:"30",rows:"8",placeholder:"请输入内容"},domProps:{value:e.Desc},on:{input:function(t){t.target.composing||(e.Desc=t.target.value)}}})])],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"权限设置",name:"second"}},[a("div",{staticClass:"clearFloat setting"},[a("div",{staticClass:"fl"},[a("div",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v("编辑组")]),e._v(" "),a("a",{staticClass:"fr add",attrs:{href:"javascript:void (0)"},on:{click:function(t){return e.PropDiv(t,1)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加")])]),e._v(" "),a("div",{staticClass:"editListBox"},[a("ul",e._l(e.editList,function(t,r){return a("li",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v(e._s(t.Name))]),e._v(" "),0!=r?a("i",{staticClass:"fr el-icon-close",on:{click:function(t){return e.removeEditUser(r)}}}):e._e()])}),0)])]),e._v(" "),a("div",{staticClass:"fr"},[a("div",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v("只读组")]),e._v(" "),a("a",{staticClass:"fr add",attrs:{href:"javascript:void (0)"},on:{click:function(t){return e.PropDiv(t,0)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加")])]),e._v(" "),a("div",{staticClass:"editListBox"},[a("ul",e._l(e.readOnlyList,function(t,r){return a("li",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v(e._s(t.Name))]),e._v(" "),a("i",{staticClass:"fr el-icon-close",on:{click:function(t){return e.removeReadUser(r)}}})])}),0)])])])])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"},attrs:{disabled:e.isSaveBtn},on:{click:e.saveDir}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.cancel}},[e._v("取消")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showProp,expression:"showProp"}],ref:"prop",staticClass:"prop_ou"},[a("div",{staticClass:"header_input",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserListByKeyWord(t)}}},[a("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",clearable:""},model:{value:e.searchInp,callback:function(t){e.searchInp=t},expression:"searchInp"}})],1),e._v(" "),a("el-checkbox-group",{model:{value:e.cacheArr,callback:function(t){e.cacheArr=t},expression:"cacheArr"}},[a("ul",{attrs:{id:"ou_list"}},e._l(e.checkedArr,function(t){return a("li",[a("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.Name))])],1)}),0)]),e._v(" "),a("div",{staticClass:"prop_button"},[a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.pushSettingList}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.cancelProp}},[e._v("取消")])],1)],1)])},staticRenderFns:[]};var S=a("VU/8")(x,k,!1,function(e){a("nEAm"),a("pUu9")},"data-v-2b4a60b8",null).exports,C={name:"editDir",props:["FolderID","optionsSize","type"],data:function(){return{loading:!1,activeName:"first",showProp:!1,checkedArr:[],sizeValue:"",editType:"",editList:[],readOnlyList:[],searchInp:"",cacheArr:[],dirInfo:"",people:!1}},methods:{handleClick:function(e,t){},cancel:function(){this.$parent.showEditDir=!1},removeEditUser:function(e){this.editList.splice(e,1)},removeReadUser:function(e){this.readOnlyList.splice(e,1)},PropDiv:function(e,t){this.cacheArr=[];var a=this.$refs.prop;a.style.top=e.clientY+"px",a.style.left=e.clientX+"px",this.editType=1==t?1:0,this.showProp=!0,this.searchInp="",this.checkedArr=[]},cancelProp:function(){this.showProp=!1},pushSettingList:function(){var e;1==this.editType&&(e=this.merge(this.editList.concat(this.cacheArr),this.readOnlyList),this.editList=e[0],this.readOnlyList=e[1]),0==this.editType&&(e=this.merge(this.readOnlyList.concat(this.cacheArr),this.editList),this.editList=e[1],this.readOnlyList=e[0]),this.showProp=!1},merge:function(e,t){for(var a=[],r=[],i=[],s=[],o=0;o<e.length;o++)a.push(n()(e[o]));for(var l=0;l<t.length;l++)r.push(n()(t[l]));a=[].concat(w()(new _.a(a)));for(var c=0;c<a.length;c++){for(var u=0;u<r.length;u++)a[c]==r[u]&&r.splice(u,1);s.push(JSON.parse(a[c]))}for(var d=0;d<r.length;d++)i.push(JSON.parse(r[d]));return[s,i]},linkage:function(e){this.fileServerName=e.Name,this.sizeValue=e.FileSpace},inspectName:function(){var e=this;""!=this.dirName?this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderName:this.dirName,LoginUser:o.get("LoginInfo").Account,opr:"CheckFolderName"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);"true"==a.result.toLowerCase()?(e.showSuccess=!0,e.showError=!1):(e.showSuccess=!1,e.showError=!0)}).catch(function(t){e.$message.error("数据错误")}):this.$message.warning("请输入文件夹名称")},getUserListByKeyWord:function(){var e=this;""!=this.searchInp&&(this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.searchInp,Account:o.get("LoginInfo").Account,LoginUser:o.get("LoginInfo").Account,opr:"SearchUserForPermissions"}).then(function(t){var a=t.data;if(e.loading=!1,o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.checkedArr=a.data}).catch(function(t){e.$message.error("数据错误")}))},saveDir:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:this.FolderID,Space:this.dirInfo.Space,Desc:this.dirInfo.Desc,Permissions:n()({Editor:this.editList,Reader:this.readOnlyList}),Account:this.people?this.dirInfo.UserAccount:o.get("LoginInfo").Account,LoginUser:o.get("LoginInfo").Account,opr:"ModifyFolder"}).then(function(t){var a=t.data;if(e.loading=!1,o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.$emit("editSaveFn","success")}).catch(function(t){e.$message.error("数据错误")})}},mounted:function(){var e=this;this.sizeValue=this.optionsSize[0].Space,"admin"==this.type&&(this.people=!0),this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:this.FolderID,LoginUser:o.get("LoginInfo").Account,opr:"GetFolderInfo"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.dirInfo=a,e.editList=a.Permissions.Editor,e.readOnlyList=a.Permissions.Reader}).catch(function(t){e.$message.error("数据错误")})}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bgModel"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.cancel}}),e._v("\n      文件夹属性\n    ")]),e._v(" "),a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基础设置",name:"first"}},[a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件夹名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.FolderName,expression:"dirInfo.FolderName"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirInfo.FolderName},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"FolderName",t.target.value)}}})])],1),e._v(" "),e.people?a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("所属人")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.UserName,expression:"dirInfo.UserName"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirInfo.UserName},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"UserName",t.target.value)}}})])],1):e._e(),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("授权编号")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.AccreditID,expression:"dirInfo.AccreditID"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirInfo.AccreditID},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"AccreditID",t.target.value)}}})])],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("选择文件服务器")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.FileServerName,expression:"dirInfo.FileServerName"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirInfo.FileServerName},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"FileServerName",t.target.value)}}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("设置文件大小")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"270px"},attrs:{placeholder:"请选择"},model:{value:e.sizeValue,callback:function(t){e.sizeValue=t},expression:"sizeValue"}},e._l(e.optionsSize,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("有效期")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.Validity,expression:"dirInfo.Validity"}],staticStyle:{width:"120px"},attrs:{type:"text",readonly:""},domProps:{value:e.dirInfo.Validity},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"Validity",t.target.value)}}}),e._v(" "),a("span",{staticClass:"warning"},[e._v("到期时间为"),a("span",{domProps:{textContent:e._s(e.dirInfo.DueToTime)}})])])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("说明")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.dirInfo.Desc,expression:"dirInfo.Desc"}],attrs:{cols:"30",rows:"8",placeholder:"请输入内容"},domProps:{value:e.dirInfo.Desc},on:{input:function(t){t.target.composing||e.$set(e.dirInfo,"Desc",t.target.value)}}})])],1)],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"权限设置",name:"second"}},[a("div",{staticClass:"clearFloat setting"},[a("div",{staticClass:"fl"},[a("div",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v("编辑组")]),e._v(" "),a("a",{staticClass:"fr add",attrs:{href:"javascript:void (0)"},on:{click:function(t){return e.PropDiv(t,1)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加")])]),e._v(" "),a("div",{staticClass:"editListBox"},[a("ul",e._l(e.editList,function(t,r){return a("li",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v(e._s(t.Name))]),e._v(" "),0!=r?a("i",{staticClass:"fr el-icon-close",on:{click:function(t){return e.removeEditUser(r)}}}):e._e()])}),0)])]),e._v(" "),a("div",{staticClass:"fr"},[a("div",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v("只读组")]),e._v(" "),a("a",{staticClass:"fr add",attrs:{href:"javascript:void (0)"},on:{click:function(t){return e.PropDiv(t,0)}}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 添加")])]),e._v(" "),a("div",{staticClass:"editListBox"},[a("ul",e._l(e.readOnlyList,function(t,r){return a("li",{staticClass:"clearFloat"},[a("span",{staticClass:"fl"},[e._v(e._s(t.Name))]),e._v(" "),a("i",{staticClass:"fr el-icon-close",on:{click:function(t){return e.removeReadUser(r)}}})])}),0)])])])])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.saveDir}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.cancel}},[e._v("取消")])],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showProp,expression:"showProp"}],ref:"prop",staticClass:"prop_ou"},[a("div",{staticClass:"header_input",on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getUserListByKeyWord(t)}}},[a("el-input",{attrs:{placeholder:"请输入内容","prefix-icon":"el-icon-search",clearable:""},model:{value:e.searchInp,callback:function(t){e.searchInp=t},expression:"searchInp"}})],1),e._v(" "),a("el-checkbox-group",{model:{value:e.cacheArr,callback:function(t){e.cacheArr=t},expression:"cacheArr"}},[a("ul",{attrs:{id:"ou_list"}},e._l(e.checkedArr,function(t){return a("li",[a("el-checkbox",{attrs:{label:t}},[e._v(e._s(t.Name))])],1)}),0)]),e._v(" "),a("div",{staticClass:"prop_button"},[a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.pushSettingList}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.cancelProp}},[e._v("取消")])],1)],1)])},staticRenderFns:[]};var L=a("VU/8")(C,b,!1,function(e){a("vdP6"),a("Qfuc")},"data-v-bd33b962",null).exports,$={name:"lookOver",props:["FolderID"],methods:{lookOverCancel:function(){this.$parent.lookOverDiv=!1},onCopy:function(){this.$message.success("复制成功")},onError:function(){this.$message.error("复制失败")}},data:function(){return{dirName:"",dirPath:"",validity:""}},mounted:function(){var e=this;this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:this.FolderID,LoginUser:o.get("LoginInfo").Account,opr:"FolderToView"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.dirPath=a.Path,e.dirName=a.Name,e.validity=a.Validity}).catch(function(t){e.$message.error("数据错误")})}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lookOver"},[a("div",{staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.lookOverCancel}})]),e._v(" "),a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px","padding-bottom":"50px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件夹名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirName,expression:"dirName"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirName},on:{input:function(t){t.target.composing||(e.dirName=t.target.value)}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("共享路径")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dirPath,expression:"dirPath"}],attrs:{type:"text",readonly:""},domProps:{value:e.dirPath},on:{input:function(t){t.target.composing||(e.dirPath=t.target.value)}}})])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:7,span:17}},[a("a",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.dirPath,expression:"dirPath",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticStyle:{color:"#409EFF"},attrs:{href:"javascript:void (0)"}},[e._v("复制路径")])])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("有效期")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.validity,expression:"validity"}],attrs:{type:"text",width:"150px",readonly:""},domProps:{value:e.validity},on:{input:function(t){t.target.composing||(e.validity=t.target.value)}}})])],1)],1)])])},staticRenderFns:[]};var D=a("VU/8")($,N,!1,function(e){a("6MZh")},"data-v-8efa7820",null).exports,I={name:"user",computed:{percentage:function(){return this.UseSpace?Math.round(this.UseSpace/this.SumSpace):0}},mounted:function(){var e=this,t=new Date,a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();this.dateValue=[a+"-"+r+"-"+i+" 00:00:00",a+"-"+r+"-"+i+" 23:59:59"],this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"GetSpaceList"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$message.warning("超时"),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.spaceSizeList=a.data,e.spaceSize=a.data.length?a.data[0].Space:""}).catch(function(t){e.$message.error("数据错误")}),this.UseSpace=o.get("LoginInfo").UseSpace,this.SumSpace=o.get("LoginInfo").SumSpace,this.QueryAllFolderList()},data:function(){return{isAllList:!0,UseSpace:"",SumSpace:"",clearable:!1,loading:!1,dirName:"",pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()+864e5}},liList:["使用中的文件夹","已过期的文件夹"],now:0,spaceSizeList:[],spaceSize:"",dateValue:[],dayValue:1,dayOptions:[{value:1,label:"90天-180天"},{value:2,label:"180天-365天"},{value:3,label:"365天以上"}],userTableList:[],currentPage:1,total:0,showNewDir:!1,showEditDir:!1,modalDirName:"",modalServerName:"",modalTime:"",modalDesc:"",renewalDay:90,renewalDiv:!1,renewalDayList:[{value:90,label:"90天"},{value:180,label:"180天"},{value:365,label:"365天"}],lookOverDiv:!1,FolderID:""}},components:{VHeader:p,NewDir:S,LookOver:D,editDir:L},methods:{addClass:function(e){this.now=e,this.isAllList=!0,this.currentPage=1,this.QueryAllFolderList()},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.isAllList?this.GetFolderList():this.QueryAllFolderList()},addDir:function(){this.showNewDir=!0,this.FolderID=""},showRenewalDiv:function(e,t,a,r,i){this.FolderID=e,this.modalDirName=t,this.renewalDay=Number(a),this.modalTime=r,this.modalServerName=i,this.renewalDiv=!0},renewalSave:function(){var e=this;this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:this.FolderID,Day:this.renewalDay,Desc:this.modalDesc,Account:o.get("LoginInfo").Account,DueToTime:this.modalTime,Type:0==this.now?0:1,LoginUser:o.get("LoginInfo").Account,opr:"FolderRenewal"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.GetFolderList(),e.renewalCancel()}).catch(function(t){e.$message.error("数据错误")})},renewalCancel:function(){this.renewalDiv=!1},editFolder:function(e){this.showEditDir=!0,this.FolderID=e},showLookOverDiv:function(e){this.lookOverDiv=!0,this.FolderID=e},DeleteFolder:function(e,t){var a=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:e,LoginUser:o.get("LoginInfo").Account,opr:"DeleteFolder"}).then(function(e){var r=e.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(a.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){a.$router.push("/login")}}),!1):r.errmsg?(a.$message.warning(r.errmsg),!1):(a.$message.warning("数据异常"),!1);a.userTableList.splice(t,1),a.total--,a.$message({type:"success",message:"删除成功!"})}).catch(function(e){a.$message.error("数据错误")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},GetFolderList:function(e){var t=this;e&&(this.currentPage=1,this.isAllList=!1),this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.dirName,Account:o.get("LoginInfo").Account,Space:this.spaceSize,BeginTime:this.dateValue[0],EndTime:this.dateValue[1],LocalPath:this.serverLocalPath,Validity:this.dayValue,FileServerID:0,Type:0==this.now?0:1,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"GetFolderList"}).then(function(e){t.loading=!1;var a=e.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(t.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){t.$router.push("/login")}}),!1):a.errmsg?(t.$message.warning(a.errmsg),!1):(t.$message.warning("数据异常"),!1);t.currentPage=Number(a.pageIndex),t.total=Number(a.recordCount),t.userTableList=a.data}).catch(function(e){t.$message.error("数据错误")})},QueryAllFolderList:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,Account:o.get("LoginInfo").Account,Type:0==this.now?0:1,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryAllFolderList"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.currentPage=Number(a.pageIndex),e.total=Number(a.recordCount),e.userTableList=a.data}).catch(function(t){e.$message.error("数据错误")})},newSave:function(e){"success"==e&&(this.showNewDir=!1,this.GetFolderList())},editSave:function(e){"success"==e&&(this.showEditDir=!1)}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}},[a("div",{staticClass:"progress clearFloat"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:e.percentage,status:"exception"}}),e._v(" "),a("div",{staticClass:"fr"},[e._v("\n            "+e._s(e.UseSpace)+"G/"+e._s(e.SumSpace)+"G\n          ")])],1),e._v(" "),a("div",{staticClass:"toggleList"},[a("ul",e._l(e.liList,function(t,r){return a("li",{key:t,class:{now:e.now===r},on:{click:function(t){return e.addClass(r)}}},[e._v(e._s(t))])}),0)])]),e._v(" "),a("el-main",[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n          文件夹名称　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dirName,expression:"dirName",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"请输入文件夹名称"},domProps:{value:e.dirName},on:{input:function(t){t.target.composing||(e.dirName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v("\n          文件夹大小　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.spaceSize,callback:function(t){e.spaceSize=t},expression:"spaceSize"}},e._l(e.spaceSizeList,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n          创建时间　"),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,clearable:e.clearable},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v("\n          有效期　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dayValue,callback:function(t){e.dayValue=t},expression:"dayValue"}},e._l(e.dayOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:function(t){return e.GetFolderList("reset")}}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("a",{staticClass:"addDir",attrs:{href:"javascript:void (0);"},on:{click:e.addDir}},[a("i"),e._v("新建文件夹\n            ")])]),e._v(" "),a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[a("thead",[a("tr",[a("td",{attrs:{width:"15%"}},[e._v("文件夹名称")]),e._v(" "),a("td",{attrs:{width:"10%"}},[a("i"),e._v(" 使用情况")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 创建时间")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 修改时间")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 过期时间")]),e._v(" "),a("td",{attrs:{width:"10%"}},[a("i"),e._v(" 有效期")]),e._v(" "),a("td",{attrs:{width:"20%"}},[a("i"),e._v(" 操作")])])]),e._v(" "),a("tbody",e._l(e.userTableList,function(t,r){return a("tr",{key:t.ID},[a("td",[e._v(e._s(t.Name||"-"))]),e._v(" "),a("td",[e._v(e._s(t.SpaceUse||"-"))]),e._v(" "),a("td",[e._v(e._s(t.CreateTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.ModifyTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.DueToTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Validity||"-"))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.showLookOverDiv(t.ID)}}},[e._v("查看")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.editFolder(t.ID)}}},[e._v("| 编辑")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.DeleteFolder(t.ID,r)}}},[e._v("| 删除")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.showRenewalDiv(t.ID,t.Name,t.Validity,t.DueToTime,t.FileServerName)}}},[e._v("| 续期")])])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])],1)],1),e._v(" "),e.showNewDir?a("div",[a("NewDir",{attrs:{optionsSize:e.spaceSizeList},on:{successFn:e.newSave}})],1):e._e(),e._v(" "),e.renewalDiv?a("div",{staticClass:"renewalDiv"},[a("div",{staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.renewalCancel}}),e._v("\n        续期申请\n      ")]),e._v(" "),a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件夹名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.modalDirName,expression:"modalDirName"}],attrs:{type:"text",readonly:""},domProps:{value:e.modalDirName},on:{input:function(t){t.target.composing||(e.modalDirName=t.target.value)}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.modalServerName,expression:"modalServerName"}],attrs:{type:"text",readonly:""},domProps:{value:e.modalServerName},on:{input:function(t){t.target.composing||(e.modalServerName=t.target.value)}}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("到期时间")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.modalTime,expression:"modalTime"}],attrs:{type:"text",readonly:""},domProps:{value:e.modalTime},on:{input:function(t){t.target.composing||(e.modalTime=t.target.value)}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("续期")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"270px"},model:{value:e.renewalDay,callback:function(t){e.renewalDay=t},expression:"renewalDay"}},e._l(e.renewalDayList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("说明")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.modalDesc,expression:"modalDesc"}],attrs:{cols:"30",rows:"8"},domProps:{value:e.modalDesc},on:{input:function(t){t.target.composing||(e.modalDesc=t.target.value)}}})])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.renewalSave}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.renewalCancel}},[e._v("取消")])],1)])]):e._e(),e._v(" "),e.lookOverDiv?a("div",[a("LookOver",{attrs:{FolderID:e.FolderID}})],1):e._e(),e._v(" "),e.showEditDir?a("div",[a("editDir",{attrs:{optionsSize:e.spaceSizeList,type:"user",FolderID:e.FolderID},on:{editSaveFn:e.editSave}})],1):e._e()],1)},staticRenderFns:[]};var P=a("VU/8")(I,A,!1,function(e){a("p4M6"),a("Xhop")},"data-v-257e1f84",null).exports,T={name:"dirAdmin",mounted:function(){var e=this,t=new Date,a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();this.dateValue=[a+"-"+r+"-"+i+" 00:00:00",a+"-"+r+"-"+i+" 23:59:59"],this.$http.all([this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"FileServerList"}),this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"GetSpaceList"})]).then(this.$http.spread(function(t,a){var r=t.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):r.errmsg?(e.$message.warning(r.errmsg),!1):(e.$message.warning("数据异常"),!1);e.fileServerOptions=r.data,e.fileServer=r.data.length?r.data[0].ID:"";var i=a.data;if(o.setKey(i.key),"false"==i.result.toLowerCase())return"超时"==i.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):i.errmsg?(e.$message.warning(i.errmsg),!1):(e.$message.warning("数据异常"),!1);e.options=i.data,e.sizeValue=i.data.length?i.data[0].Space:""})).then(function(){e.QueryAllFolderList()}).catch(function(t){e.$message.error("数据错误")})},data:function(){return{isAllList:!0,loading:!1,dirID:"",dirName:"",people:"",clearable:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()+864e5}},dateValue:"",liList:["使用中的文件夹","已过期的文件夹"],now:0,sizeValue:100,options:[],deadlineValue:1,options2:[{value:1,label:"90天-180天"},{value:2,label:"180天-365天"},{value:3,label:"365天以上"}],adminTableList:[],currentPage:1,total:0,showEditDir:!1,renewalDay:"",renewalDiv:!1,renewalDayList:[{value:"111",label:"30天"}],lookOverDiv:!1,host:"",hostOptions:[],fileServer:"",fileServerOptions:[],isPastDue:!1}},components:{VHeader:p,NewDir:S,LookOver:D,editDir:L},methods:{addClass:function(e){this.now=e,this.currentPage=1,this.isAllList=!0,this.QueryAllFolderList(),this.isPastDue=0!=e},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.isAllList?this.GetFolderList():this.QueryAllFolderList()},showRenewalDiv:function(){this.renewalDiv=!0},renewalCancel:function(){this.renewalDiv=!1},showLookOverDiv:function(e){this.dirID=e,this.lookOverDiv=!0},GetFolderList:function(e){var t=this;e&&(this.currentPage=1,this.isAllList=!1),this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.dirName,Account:this.people,Space:this.sizeValue,BeginTime:this.dateValue[0],EndTime:this.dateValue[1],LocalPath:this.serverLocalPath,Validity:this.deadlineValue,FileServerID:this.fileServer,Type:0==this.now?0:1,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"GetFolderList"}).then(function(e){t.loading=!1;var a=e.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(t.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){t.$router.push("/login")}}),!1):a.errmsg?(t.$message.warning(a.errmsg),!1):(t.$message.warning("数据异常"),!1);t.currentPage=Number(a.pageIndex),t.total=Number(a.recordCount),t.adminTableList=a.data}).catch(function(e){t.$message.error("数据错误")})},QueryAllFolderList:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,Account:"",Type:0==this.now?0:1,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryAllFolderList"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.currentPage=Number(a.pageIndex),e.total=Number(a.recordCount),e.adminTableList=a.data}).catch(function(t){e.$message.error("数据错误")})},editFolder:function(e){this.showEditDir=!0,this.dirID=e},editSave:function(e){"success"==e&&(this.showEditDir=!1)},DeleteFolder:function(e,t){var a=this;this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FolderID:e,LoginUser:o.get("LoginInfo").Account,opr:"DeleteFolder"}).then(function(e){var r=e.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(a.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){a.$router.push("/login")}}),!1):r.errmsg?(a.$message.warning(r.errmsg),!1):(a.$message.warning("数据异常"),!1);a.adminTableList.splice(t,1),a.total--}).catch(function(e){a.$message.error("数据错误")})}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}},[a("div",{staticClass:"toggleList"},[a("ul",e._l(e.liList,function(t,r){return a("li",{key:t,class:{now:e.now===r},on:{click:function(t){return e.addClass(r)}}},[e._v(e._s(t))])}),0)])]),e._v(" "),a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isPastDue,expression:"isPastDue"}],staticStyle:{"font-size":"14px",color:"#F81819","padding-bottom":"20px"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" 过期6个月的文件夹无法再续期\n        ")]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n          文件夹名称　"),a("input",{staticClass:"dirName",attrs:{type:"text",placeholder:"请输入文件夹名称"}}),e._v("\n          文件夹大小　"),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择"},model:{value:e.sizeValue,callback:function(t){e.sizeValue=t},expression:"sizeValue"}},e._l(e.options,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1),e._v("\n          所属人　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.people,expression:"people",modifiers:{trim:!0}}],staticClass:"dirName",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.people},on:{input:function(t){t.target.composing||(e.people=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n          文件服务器　"),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择"},model:{value:e.fileServer,callback:function(t){e.fileServer=t},expression:"fileServer"}},e._l(e.fileServerOptions,function(e){return a("el-option",{key:e.ID,attrs:{label:e.Name,value:e.ID}})}),1),e._v("\n          创建时间　"),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,clearable:e.clearable},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v("\n          有效期　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deadlineValue,callback:function(t){e.deadlineValue=t},expression:"deadlineValue"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:function(t){return e.GetFolderList("reset")}}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[a("thead",[a("tr",[a("td",{attrs:{width:"13%"}},[e._v("文件夹名称")]),e._v(" "),a("td",{attrs:{width:"10%"}},[a("i"),e._v(" 文件夹大小")]),e._v(" "),a("td",{attrs:{width:"10%"}},[a("i"),e._v(" 所属人")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 文件服务器")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 创建时间")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 修改时间")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 有效期")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 操作")])])]),e._v(" "),a("tbody",e._l(e.adminTableList,function(t,r){return a("tr",{key:t},[a("td",[e._v(e._s(t.Name||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Space?t.Space+"GB":"-"))]),e._v(" "),a("td",[e._v(e._s(t.UserName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.FileServerName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.CreateTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.ModifyTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Validity||"-"))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.showLookOverDiv(t.ID)}}},[e._v("查看")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.editFolder(t.ID)}}},[e._v("| 编辑")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.DeleteFolder(t.ID,r)}}},[e._v("| 删除")])])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])],1)],1),e._v(" "),e.showEditDir?a("div",[a("editDir",{attrs:{optionsSize:e.options,type:"admin",FolderID:e.dirID},on:{editSaveFn:e.editSave}})],1):e._e(),e._v(" "),e.renewalDiv?a("div",{staticClass:"renewalDiv"},[a("div",{staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.renewalCancel}}),e._v("\n        续期申请\n      ")]),e._v(" "),a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件夹名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{attrs:{type:"text"}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{attrs:{type:"text"}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("到期时间")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{attrs:{type:"text"}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("续期")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"270px"},model:{value:e.renewalDay,callback:function(t){e.renewalDay=t},expression:"renewalDay"}},e._l(e.renewalDayList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("说明")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("textarea",{attrs:{cols:"30",rows:"8"}})])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.renewalCancel}},[e._v("取消")])],1)])]):e._e(),e._v(" "),e.lookOverDiv?a("div",[a("LookOver",{attrs:{FolderID:e.dirID}})],1):e._e()],1)},staticRenderFns:[]};var V=a("VU/8")(T,F,!1,function(e){a("PEw2"),a("evki")},"data-v-35a02b74",null).exports,O={name:"fileServer",data:function(){return{loading:!1,isShowNewServer:!1,isReadOnly:!1,serverTableList:[],serverName:"",serverPath:"",serverSpace:"",serverLocalPath:"",KeyWord:"",total:0,currentPage:1}},components:{VHeader:p},mounted:function(){this.searchList()},methods:{addClass:function(e){this.now=e,this.isPastDue=0!=e},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.searchList()},addServer:function(){this.serverName="",this.serverPath="",this.serverLocalPath="",this.serverSpace="",this.isShowNewServer=!0,this.isReadOnly=!1},newServerCancel:function(){this.isShowNewServer=!1},handleInput:function(e){"Backspace"!==e.key&&(e.key.replace(/[^\d]/g,"")||e.preventDefault())},saveServer:function(){var e=this;""!=this.serverPath&&""!=this.serverName&&""!=this.serverSpace&&""!=this.serverLocalPath?(this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,Name:this.serverName,Path:this.serverPath,LocalPath:this.serverLocalPath,Space:this.serverSpace,LoginUser:o.get("LoginInfo").Account,opr:"AddFolderServer"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.searchList(),e.isShowNewServer=!1}).catch(function(t){e.$message.error("数据错误")})):this.$message({message:"输入框必填",type:"warning"})},searchList:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.KeyWord,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryFolderServer"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.serverTableList=a.data,e.total=Number(a.recordCount)}).catch(function(t){e.$message.error("数据错误")})},editServer:function(e){this.serverName=arguments.length<=1?void 0:arguments[1],this.serverPath=arguments.length<=2?void 0:arguments[2],this.serverSpace=arguments.length<=3?void 0:arguments[3],this.isReadOnly=!0,this.isShowNewServer=!0},delServer:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("",{strCurrentTime:o.get("LoginInfo").key,FoldeServerID:e,LoginUser:o.get("LoginInfo").Account,opr:"DeleteFolderServer"}).then(function(e){var r=e.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(a.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){a.$router.push("/login")}}),!1):r.errmsg?(a.$message.warning(r.errmsg),!1):(a.$message.warning("数据异常"),!1);a.serverTableList.splice(t,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(e){a.$message.error("数据错误")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}}),e._v(" "),a("el-main",[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n          文件服务器名称　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.KeyWord,expression:"KeyWord",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"请输入文件夹名称"},domProps:{value:e.KeyWord},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchList(t)},input:function(t){t.target.composing||(e.KeyWord=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.searchList}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("a",{staticClass:"addDir",attrs:{href:"javascript:void (0);"},on:{click:e.addServer}},[a("i"),e._v("新建文件服务器\n            ")])]),e._v(" "),a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[a("thead",[a("tr",[a("td",{attrs:{width:"43%"}},[e._v("文件服务器名称")]),e._v(" "),a("td",{attrs:{width:"43%"}},[a("i"),e._v(" 文件服务器路径")]),e._v(" "),a("td",{attrs:{width:"14%"}},[a("i"),e._v(" 操作")])])]),e._v(" "),a("tbody",e._l(e.serverTableList,function(t,r){return a("tr",[a("td",[e._v(e._s(t.Name||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Path||"-"))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.editServer(t.ID,t.Name,t.Path,t.Space)}}},[e._v("编辑")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.delServer(t.ID,r)}}},[e._v("| 删除")])])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNewServer,expression:"isShowNewServer"}],staticClass:"newServerDiv"},[a("div",{staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.newServerCancel}}),e._v("\n        新建文件服务器\n      ")]),e._v(" "),a("div",{staticClass:"tabs",staticStyle:{padding:"10px 30px","line-height":"32px","margin-top":"10px","padding-bottom":"50px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器名称")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.serverName,expression:"serverName",modifiers:{trim:!0}}],attrs:{type:"text",readonly:e.isReadOnly},domProps:{value:e.serverName},on:{input:function(t){t.target.composing||(e.serverName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器路径")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.serverPath,expression:"serverPath",modifiers:{trim:!0}}],attrs:{type:"text",readonly:e.isReadOnly},domProps:{value:e.serverPath},on:{input:function(t){t.target.composing||(e.serverPath=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器本地路径")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.serverLocalPath,expression:"serverLocalPath",modifiers:{trim:!0}}],attrs:{type:"text",readonly:e.isReadOnly},domProps:{value:e.serverLocalPath},on:{input:function(t){t.target.composing||(e.serverLocalPath=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器空间大小")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.serverSpace,expression:"serverSpace"}],attrs:{type:"number",width:"135px"},domProps:{value:e.serverSpace},on:{keydown:e.handleInput,input:function(t){t.target.composing||(e.serverSpace=t.target.value)}}}),e._v("GB\n          ")])],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.saveServer}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.newServerCancel}},[e._v("取消")])],1)])])],1)},staticRenderFns:[]};var z=a("VU/8")(O,U,!1,function(e){a("tcHT"),a("l528")},"data-v-5c4b05ef",null).exports,E={name:"report",mounted:function(){this.$router.push("/admin/report/RenewalOfApproval")},data:function(){return{liList:["续期审批"],now:0}},components:{VHeader:p},methods:{addClass:function(e){this.$router.push("/admin/report/RenewalOfApproval")}}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}},[a("div",{staticClass:"toggleList"},[a("ul",e._l(e.liList,function(t,r){return a("li",{class:{now:e.now===r},on:{click:function(t){return e.addClass(r)}}},[e._v(e._s(t))])}),0)])]),e._v(" "),a("el-main",[a("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var B=a("VU/8")(E,K,!1,function(e){a("Ooi0"),a("1xET")},"data-v-6cff7063",null).exports,R={name:"FolderReport",data:function(){return{options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],sizeValue:"",dateValue:"",deadlineValue:"",options2:[{value:"选项1",label:"30天"}],adminTableList:[{dirName:"",capacity:"50G/100G",host:"",fileServer:"",crateTime:"2019-12-12",validity:"30天"},{dirName:"",capacity:"50G/100G",host:"",fileServer:"",crateTime:"2019-12-12",validity:"30天"},{dirName:"",capacity:"50G/100G",host:"",fileServer:"",crateTime:"",validity:"30天"}],currentPage1:3,showNewDir:!1,renewalDay:"",renewalDiv:!1,renewalDayList:[{value:"111",label:"30天"}],lookOverDiv:!1,host:"",hostOptions:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"黄金糕"}],fileServer:"",fileServerOptions:[{value:"选项1",label:"服务器1"},{value:"选项2",label:"服务器2"}]}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},addDir:function(){this.showNewDir=!0},showRenewalDiv:function(){this.renewalDiv=!0},renewalCancel:function(){this.renewalDiv=!1},showLookOverDiv:function(){this.lookOverDiv=!0}},components:{LookOver:D}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n    文件夹名称　"),a("input",{staticClass:"dirName",attrs:{type:"text",placeholder:"请输入文件夹名称"}}),e._v("\n    使用情况　"),a("el-select",{staticStyle:{"margin-right":"20px",width:"170px"},attrs:{placeholder:"请选择"},model:{value:e.sizeValue,callback:function(t){e.sizeValue=t},expression:"sizeValue"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("\n    所属人　"),a("el-select",{staticStyle:{width:"173px"},attrs:{placeholder:"请选择"},model:{value:e.host,callback:function(t){e.host=t},expression:"host"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n    文件服务器　"),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择"},model:{value:e.fileServer,callback:function(t){e.fileServer=t},expression:"fileServer"}},e._l(e.fileServerOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v("\n    创建时间　"),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v("\n    有效期　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deadlineValue,callback:function(t){e.deadlineValue=t},expression:"deadlineValue"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[e._m(0),e._v(" "),a("tbody",e._l(e.adminTableList,function(t){return a("tr",[a("td",[e._v(e._s(t.dirName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.host||"-"))]),e._v(" "),a("td",[e._v(e._s(t.fileServer||"-"))]),e._v(" "),a("td",[e._v(e._s(t.capacity||"-"))]),e._v(" "),a("td",[e._v(e._s(t.crateTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.validity||"-"))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:e.showLookOverDiv}},[e._v("查看")])])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage1,"page-size":10,layout:"total, prev, pager, next",total:50},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage1=t},"update:current-page":function(t){e.currentPage1=t}}})],1)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("td",{attrs:{width:"12%"}},[e._v("文件夹名称")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 使用情况")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 所属人")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 文件服务器")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 创建时间")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 有效期")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 权限详情")])])])}]};a("VU/8")(R,W,!1,function(e){a("kT1n"),a("j0E/")},"data-v-69f249b8",null).exports;var G={name:"RenewalOfApproval",mounted:function(){var e=this,t=new Date,a=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();this.dateValue=[a+"-"+r+"-"+i+" 00:00:00",a+"-"+r+"-"+i+" 23:59:59"],this.loading="true",this.$http.all([this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"FileServerList"}),this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"GetSpaceList"})]).then(this.$http.spread(function(t,a){e.loading=!1;var r=t.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):r.errmsg?(e.$message.warning(r.errmsg),!1):(e.$message.warning("数据异常"),!1);e.fileServerOptions=r.data,e.fileServer=r.data.length?r.data[0].ID:"";var i=a.data;if(o.setKey(i.key),"false"==i.result.toLowerCase())return"超时"==i.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):i.errmsg?(e.$message.warning(i.errmsg),!1):(e.$message.warning("数据异常"),!1);e.options=i.data,e.sizeValue=i.data.length?i.data[0].Space:""})).then(function(){e.GetFolderList()}).catch(function(t){e.$message.error("数据错误")})},data:function(){return{dirName:"",loading:!1,clearable:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()+864e5}},options:[],people:"",sizeValue:"",dateValue:"",deadlineValue:1,options2:[{value:1,label:"90天-180天"},{value:2,label:"180天-365天"},{value:3,label:"365天以上"}],adminTableList:[],currentPage:1,total:0,fileServer:"",fileServerOptions:[]}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.GetFolderList()},GetFolderList:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.dirName,Account:this.people,Space:this.sizeValue,BeginTime:this.dateValue[0],EndTime:this.dateValue[1],Validity:this.deadlineValue,FileServerID:this.fileServer,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryRenewalLog"}).then(function(t){e.loading=!1;var a=t.data;if(console.log(t),o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.currentPage=Number(a.pageIndex),e.total=Number(a.recordCount),e.adminTableList=a.data}).catch(function(t){e.$message.error("数据错误1")})}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n    文件夹名称　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.dirName,expression:"dirName",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"请输入文件夹名称"},domProps:{value:e.dirName},on:{input:function(t){t.target.composing||(e.dirName=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v("\n    文件大小　"),a("el-select",{staticStyle:{"margin-right":"20px",width:"170px"},attrs:{placeholder:"请选择"},model:{value:e.sizeValue,callback:function(t){e.sizeValue=t},expression:"sizeValue"}},e._l(e.options,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1),e._v("\n    所属人　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.people,expression:"people",modifiers:{trim:!0}}],staticClass:"dirName",staticStyle:{width:"180px"},attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.people},on:{input:function(t){t.target.composing||(e.people=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})],1),e._v(" "),a("div",{staticStyle:{"margin-bottom":"15px"}},[e._v("\n    文件服务器　"),a("el-select",{staticStyle:{"margin-right":"20px"},attrs:{placeholder:"请选择"},model:{value:e.fileServer,callback:function(t){e.fileServer=t},expression:"fileServer"}},e._l(e.fileServerOptions,function(e){return a("el-option",{key:e.ID,attrs:{label:e.Name,value:e.ID}})}),1),e._v("\n    创建时间　"),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,clearable:e.clearable},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v("\n    有效期　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.deadlineValue,callback:function(t){e.deadlineValue=t},expression:"deadlineValue"}},e._l(e.options2,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.GetFolderList}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[e._m(0),e._v(" "),a("tbody",e._l(e.adminTableList,function(t){return a("tr",[a("td",[e._v(e._s(t.FolderName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.UserName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.FileServerName||"-"))]),e._v(" "),a("td",[e._v(e._s(t.CreateTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.AuditTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.AuditResult||"-"))]),e._v(" "),a("td",[e._v(e._s(t.OperTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Validity?t.Validity+"天":"-"))])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("td",{attrs:{width:"12%"}},[e._v("文件夹名称")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 所属人")]),e._v(" "),a("td",{attrs:{width:"12%"}},[a("i"),e._v(" 文件服务器")]),e._v(" "),a("td",{attrs:{width:"14%"}},[a("i"),e._v(" 创建时间")]),e._v(" "),a("td",{attrs:{width:"14%"}},[a("i"),e._v(" 续期时间")]),e._v(" "),a("td",{attrs:{width:"6%"}},[a("i"),e._v(" 审批结果")]),e._v(" "),a("td",{attrs:{width:"14%"}},[a("i"),e._v(" 审批时间")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 有效期")])])])}]};var j=a("VU/8")(G,Q,!1,function(e){a("XrFx"),a("O5PP")},"data-v-84bc5bfc",null).exports,H={name:"fileServer",watch:{serverActive:function(){this.isAdd=!1}},mounted:function(){var e=this;this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"GetFolderServer"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$message.warning("超时"),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.serverList=a.data,e.serverActive=a.data.length?a.data[0].ID:""}).catch(function(t){e.$message.error("数据错误")}),this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,LoginUser:o.get("LoginInfo").Account,opr:"GetSpaceList"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$message.warning("超时"),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.spaceSizeList=a.data,e.spaceSize=a.data.length?a.data[0].Space:""}).catch(function(t){e.$message.error("数据错误")}),this.QueryUserImpower()},data:function(){return{saveOrUpdate:1,listItemID:"",queryKeyWord:"",btnAble:!0,loading:!1,isShowAdd:!1,isShowNewAuth:!1,currentPage:1,total:0,authTableList:[],findAuthList:[],AuthId:"",AuthAccount:"",AuthName:"",spaceSize:100,serverDisable:!1,serverActive:"",spaceSizeList:[{value:100,label:"100GB"},{value:300,label:"300GB"},{value:500,label:"500GB"}],modalKeyWord:"",isAdd:!0,serverList:[]}},components:{VHeader:p},methods:{addClass:function(e){this.now=e,this.isPastDue=0!=e},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.QueryUserImpower()},addAuth:function(){this.isShowNewAuth=!0,this.findAuthList=[],this.modalKeyWord=""},newAuthCancel:function(){this.isShowNewAuth=!1},selectRadio:function(e,t,a){this.AuthId=e,this.AuthAccount=t,this.btnAble=!1,this.AuthName=a},addAuthProp:function(){this.isShowAdd=!0,this.serverDisable=!1,this.saveOrUpdate=1},addAuthDivCancel:function(){this.isShowAdd=!1},addAuthSave:function(){var e=this;1===this.saveOrUpdate?this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,Name:this.AuthName,Account:this.AuthAccount,FileSpace:this.spaceSize,AccreditID:this.AuthId,FileServerID:this.serverActive,LoginUser:o.get("LoginInfo").Account,opr:"AddUserImpower"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.QueryUserImpower(),e.isShowAdd=!1,e.isShowNewAuth=!1}).catch(function(t){e.$message.error("数据错误")}):this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,ID:this.listItemID,FileSpace:this.spaceSize,FileServerID:this.serverActive,LoginUser:o.get("LoginInfo").Account,opr:"UpdateUserImpower"}).then(function(t){var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.QueryUserImpower(),e.isShowAdd=!1}).catch(function(t){e.$message.error("数据错误")})},searchAuthList:function(){var e=this;if(""==this.modalKeyWord)return this.$message.warning("输入框必填"),!1;this.findAuthList=[],this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.modalKeyWord,LoginUser:o.get("LoginInfo").Account,opr:"SearchUserForAD"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.findAuthList=a.data,e.btnAble=!0}).catch(function(t){e.$message.error("数据错误")})},QueryUserImpower:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.queryKeyWord,PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryUserImpower"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.authTableList=a.data,e.total=Number(a.recordCount)}).catch(function(t){e.$message.error("数据错误")})},updateAuth:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];console.log(t),this.listItemID=t[0],this.serverActive=t[1],this.AuthName=t[2],this.AuthId=t[3],this.isShowAdd=!0,this.serverDisable=!0,this.saveOrUpdate=2,console.log(this.serverActive)},delAuth:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$http.post("",{strCurrentTime:o.get("LoginInfo").key,ID:e,LoginUser:o.get("LoginInfo").Account,opr:"DeleteUserImpower"}).then(function(e){var r=e.data;if(o.setKey(r.key),"false"==r.result.toLowerCase())return"超时"==r.errmsg?(a.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(e){a.$router.push("/login")}}),!1):r.errmsg?(a.$message.warning(r.errmsg),!1):(a.$message.warning("数据异常"),!1);a.authTableList.splice(t,1),a.total--,a.$message({type:"success",message:"删除成功!"})}).catch(function(e){a.$message.error("数据错误")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}}),e._v(" "),a("el-main",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.queryKeyWord,expression:"queryKeyWord",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"名/域账号"},domProps:{value:e.queryKeyWord},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.QueryUserImpower(t)},input:function(t){t.target.composing||(e.queryKeyWord=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.QueryUserImpower}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticStyle:{"margin-bottom":"5px"}},[a("a",{staticClass:"addDir",attrs:{href:"javascript:void (0);"},on:{click:e.addAuth}},[a("i"),e._v("新增授权\n            ")])]),e._v(" "),a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[a("thead",[a("tr",[a("td",{attrs:{width:"7%"}},[e._v("序号")]),e._v(" "),a("td",{attrs:{width:"20%"}},[a("i"),e._v(" 姓名")]),e._v(" "),a("td",{attrs:{width:"20%"}},[a("i"),e._v(" 域账号")]),e._v(" "),a("td",{attrs:{width:"20%"}},[a("i"),e._v(" 创建时间")]),e._v(" "),a("td",{attrs:{width:"20%"}},[a("i"),e._v(" 文件夹空间")]),e._v(" "),a("td",{attrs:{width:"13%"}},[a("i"),e._v(" 操作")])])]),e._v(" "),a("tbody",e._l(e.authTableList,function(t,r){return a("tr",[a("td",[e._v(e._s(t.SN||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Name||"-"))]),e._v(" "),a("td",[e._v(e._s(t.Account||"-"))]),e._v(" "),a("td",[e._v(e._s(t.CreateTime||"-"))]),e._v(" "),a("td",[e._v(e._s(t.FileSpace+"GB"||"-"))]),e._v(" "),a("td",[a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.updateAuth(t.ID,t.FileServerID,t.Name,t.AccreditID)}}},[e._v("修改")]),e._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(a){return e.delAuth(t.ID,r)}}},[e._v("| 删除")])])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowNewAuth,expression:"isShowNewAuth"}],staticClass:"newAuthDiv"},[a("div",{staticClass:"box"},[a("div",{staticClass:"header"},[a("i",{staticClass:"el-icon-close fr close",on:{click:e.newAuthCancel}}),e._v("\n        新增授权\n      ")]),e._v(" "),a("div",{staticClass:"tabs",staticStyle:{padding:"0 30px 10px 30px","line-height":"32px","margin-top":"10px"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.modalKeyWord,expression:"modalKeyWord",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"名/域账号"},domProps:{value:e.modalKeyWord},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchAuthList(t)},input:function(t){t.target.composing||(e.modalKeyWord=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),a("el-button",{on:{click:e.searchAuthList}},[e._v("查询")])],1),e._v(" "),a("div",{staticClass:"propFindAuthList"},[a("table",[e._m(0),e._v(" "),a("tbody",e._l(e.findAuthList,function(t){return a("tr",[a("td",[a("input",{attrs:{type:"radio",name:"Auth"},on:{click:function(a){return e.selectRadio(t.AccreditID,t.Account,t.Name)}}})]),e._v(" "),a("td",[e._v(e._s(t.Name))]),e._v(" "),a("td",[e._v(e._s(t.UPN))]),e._v(" "),a("td",[e._v(e._s(t.State))])])}),0)])])]),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{staticStyle:{"margin-left":"32px"},attrs:{disabled:e.btnAble},on:{click:e.addAuthProp}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.newAuthCancel}},[e._v("取消")])],1)])]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowAdd,expression:"isShowAdd"}],staticClass:"addAuthDiv"},[a("div",{staticClass:"box"},[a("div",{staticClass:"tabs",staticStyle:{padding:"10px 20px","line-height":"32px","margin-top":"10px"}},[a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("授权编号")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.AuthId,expression:"AuthId"}],attrs:{type:"text",readOnly:""},domProps:{value:e.AuthId},on:{input:function(t){t.target.composing||(e.AuthId=t.target.value)}}})])],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("姓名")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.AuthName,expression:"AuthName"}],attrs:{type:"text",readOnly:""},domProps:{value:e.AuthName},on:{input:function(t){t.target.composing||(e.AuthName=t.target.value)}}})])],1),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("文件服务器")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.serverDisable},model:{value:e.serverActive,callback:function(t){e.serverActive=t},expression:"serverActive"}},e._l(e.serverList,function(e){return a("el-option",{key:e.ID,attrs:{label:e.Name,value:e.ID}})}),1)],1)],1),e._v(" "),a("el-row",{staticStyle:{margin:"5px 0"}},[a("el-col",{staticClass:"text-right",attrs:{span:7}},[e._v("空间大小")]),e._v(" "),a("el-col",{attrs:{span:17}},[a("el-select",{staticStyle:{width:"150px"},model:{value:e.spaceSize,callback:function(t){e.spaceSize=t},expression:"spaceSize"}},e._l(e.spaceSizeList,function(e){return a("el-option",{key:e.Space,attrs:{label:e.SpaceName,value:e.Space}})}),1)],1)],1)],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-button",{attrs:{disabled:e.isAdd},on:{click:e.addAuthSave}},[e._v("确定")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"32px"},on:{click:e.addAuthDivCancel}},[e._v("关闭")])],1)])])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("td",{attrs:{width:"15%"}}),this._v(" "),t("td",{attrs:{width:"35%"}},[this._v("姓名")]),this._v(" "),t("td",{attrs:{width:"35%"}},[this._v("域账号")]),this._v(" "),t("td",{attrs:{width:"15%"}},[this._v("状态")])])])}]};var q=a("VU/8")(H,M,!1,function(e){a("jiwJ"),a("C6UZ")},"data-v-3c121d64",null).exports,J={name:"commitLog",mounted:function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();this.dateValue=[t+"-"+a+"-"+r+" 00:00:00",t+"-"+a+"-"+r+" 23:59:59"],this.QueryLogList()},data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()+864e5}},clearable:!1,options:[{value:"1",label:"全部"},{value:"2",label:"成功"},{value:"3",label:"失败"}],operationResult:"1",queryKeyWord:"",dateValue:[],loading:!1,currentPage:1,total:0,logTableList:[]}},components:{VHeader:p},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.QueryLogList()},QueryLogList:function(){var e=this;this.loading=!0,this.$http.post("",{strCurrentTime:o.get("LoginInfo").key,KeyWord:this.queryKeyWord,BeginTime:this.dateValue[0],EndTime:this.dateValue[1],PageIndex:this.currentPage,PageSize:10,LoginUser:o.get("LoginInfo").Account,opr:"QueryOperLog"}).then(function(t){e.loading=!1;var a=t.data;if(o.setKey(a.key),"false"==a.result.toLowerCase())return"超时"==a.errmsg?(e.$alert("key超时","超时",{confirmButtonText:"确定",callback:function(t){e.$router.push("/login")}}),!1):a.errmsg?(e.$message.warning(a.errmsg),!1):(e.$message.warning("数据异常"),!1);e.logTableList=a.data,e.total=Number(a.recordCount)}).catch(function(t){e.$message.error("数据错误")})},newAuthCancel:function(){this.isShowDetail=!1}}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-container",[a("el-header",[a("VHeader")],1),e._v(" "),a("el-container",{staticStyle:{"margin-top":"5px"}},[a("el-aside",{staticStyle:{"border-right":"1px solid #ccc"},attrs:{width:"230px"}}),e._v(" "),a("el-main",[a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("\n          关键字　"),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.queryKeyWord,expression:"queryKeyWord",modifiers:{trim:!0}}],staticClass:"dirName",attrs:{type:"text",placeholder:"关键字"},domProps:{value:e.queryKeyWord},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.QueryLogList(t)},input:function(t){t.target.composing||(e.queryKeyWord=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v("\n          操作时间　"),a("el-date-picker",{attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"],"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,clearable:e.clearable},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}}),e._v("\n          操作结果　"),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.operationResult,callback:function(t){e.operationResult=t},expression:"operationResult"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-button",{on:{click:e.QueryLogList}},[e._v("搜索")])],1),e._v(" "),a("div",[a("div",{staticClass:"clearFloat"},[a("table",{staticClass:"userTable"},[a("thead",[a("tr",[a("td",{attrs:{width:"5%"}},[e._v("序号")]),e._v(" "),a("td",{attrs:{width:"10%"}},[a("i"),e._v(" 操作者")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" IP")]),e._v(" "),a("td",{attrs:{width:"15%"}},[a("i"),e._v(" 操作时间")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 操作对象")]),e._v(" "),a("td",{attrs:{width:"39%"}},[a("i"),e._v(" 操作描述")]),e._v(" "),a("td",{attrs:{width:"8%"}},[a("i"),e._v(" 操作结果")])])]),e._v(" "),a("tbody",e._l(e.logTableList,function(t,r){return a("tr",[a("td",[e._v(e._s(t.序号||"-"))]),e._v(" "),a("td",[e._v(e._s(t.操作者||"-"))]),e._v(" "),a("td",[e._v(e._s(t.IP||"-"))]),e._v(" "),a("td",[e._v(e._s(t.操作时间||"-"))]),e._v(" "),a("td",[e._v(e._s(t.操作对象||"-"))]),e._v(" "),a("td",[e._v(e._s(t.操作描述||"-"))]),e._v(" "),a("td",[e._v(e._s(t.操作结果||"-"))])])}),0)]),e._v(" "),a("div",{staticClass:"fr"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")(J,Y,!1,function(e){a("Oh7w"),a("nEO4")},"data-v-a105ec62",null).exports,Z={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h3",[this._v("404 Not Found")]),this._v(" "),t("hr")])}]};var ee=a("VU/8")({name:"notFount"},Z,!1,function(e){a("CpyD")},"data-v-7b5c74c3",null).exports,te={name:"test",data:function(){return{checked:"sdf"}},methods:{show:function(e){console.log(e)}}},ae={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-checkbox",{attrs:{falseLabel:"",trueLabel:this.checked},on:{change:this.show}},[this._v("备选项")])],1)},staticRenderFns:[]};var re=a("VU/8")(te,ae,!1,function(e){a("2om2")},"data-v-0289b7d8",null).exports;r.default.use(i.a);var ie=new i.a({routes:[{path:"/",alias:"/login",name:"Login",component:u},{path:"/admin",component:m,children:[{path:"",alias:"dirAdmin",component:V},{path:"fileServer",component:z},{path:"authorization",component:q},{path:"commitLog",component:X},{path:"report",component:B,children:[{path:"RenewalOfApproval",component:j}]}]},{path:"/user",component:P},{path:"/test",component:re},{path:"*",component:ee}]}),se=a("zL8q"),ne=a.n(se),oe=a("mw3O"),le=a.n(oe),ce={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var ue=a("VU/8")({name:"App"},ce,!1,function(e){a("nDN+")},null,null).exports,de=a("hKoQ"),ve=a.n(de),pe=a("wvfG"),he=a.n(pe),ge=a("mtWM"),me=a.n(ge);r.default.use(he.a),ve.a.polyfill(),me.a.defaults.baseURL="../DataInface/DataInterface.aspx",me.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",me.a.interceptors.request.use(function(e){return"post"===e.method&&(e.data=le.a.stringify(e.data)),e},function(e){return ve.a.reject(e)}),r.default.prototype.$http=me.a,r.default.use(ne.a),r.default.config.productionTip=!1,new r.default({el:"#app",router:ie,components:{App:ue},template:"<App/>"})},O5PP:function(e,t){},ONge:function(e,t){},Oh7w:function(e,t){},Ooi0:function(e,t){},PEw2:function(e,t){},QS3G:function(e,t){},Qbok:function(e,t){},Qfuc:function(e,t){},Xhop:function(e,t){},XrFx:function(e,t){},"dLd/":function(e,t,a){e.exports=a.p+"static/img/logo.05f7e62.png"},"ekt/":function(e,t){},evki:function(e,t){},"j0E/":function(e,t){},jiwJ:function(e,t){},kT1n:function(e,t){},l528:function(e,t){},"nDN+":function(e,t){},nEAm:function(e,t){},nEO4:function(e,t){},p4M6:function(e,t){},pUu9:function(e,t){},tcHT:function(e,t){},tvR6:function(e,t){},vdP6:function(e,t){}},["NHnr"]);